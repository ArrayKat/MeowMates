# Тестирование сервеной части приложения Meow Mates
## Тест план
#### Введение
Данный тест-план описывает стратегию тестирования базы данных приложения Meow Mates, которая управляет информацией о котах, их владельцах и взаимодействиями между пользователями через чаты. Тестирование будет проводиться с использованием Supabase как платформы для управления базой данных.

#### Цели тестирования
Цель: обеспечить корректность, производимость и безопасность базы данных.
- проверка корректности работы CRUD операций (создание, чтение, обновление, удаление) для всех таблиц;
- убедиться в правильности работы внешних ключей и связей между таблицами;
- проверка правильности применения политик безопасности (RLS);
- проверка целостности данных.

#### Область тестирования
В базе данных есть следующие таблицы:
- `breeds`: информация о породах котов.
- `genders`: информация о гендерах котов.
- `cats`: информация о котах (имя, порода, возраст и т.д.).
- `users`: информация о владельцах котов (ФИО, телефон и т.д.).
- `user_cats`: связь между пользователями и их котами.
- `chats`: информация о чатах.
- `chat_members`: участники чатов.
- `messages`: сообщения в чатах.

#### Стратегия тестирования
Подход к тестированию: Автоматизированное. Создание Unit-тестов для автоматизации проверки функциональности базы данных.
Уровень тестирования: Модульное. Тестирование работы базы данных, без ее взаимодействия с бизнес-логикой будущего мобильного приложения.
#### Типы тестов
- Функциональное тестирование: Проверка работы всех функций приложения (регистрация, добавление котов, поиск партнеров и т.д.).
- Интеграционное тестирование: Проверка взаимодействия между различными компонентами приложения (например, связь между пользователями и их котами).

#### Ресурсы
|Ресурсы|Пояснение|
|--------------|------|
|MSTest|Необходимо для создания Unit-тестов|
|С#|Язык программирования для написания Unit-тестов|
|Microsoft Visual Studio|IDE|
|Supabase|Облачное СУБД для хранения данных мобильного приложения|
                


#### Критерии завершения
Тестирование будет 
- все тесты будут успешно пройдены;
- будет подготовлена отчетность о результатах тестирования.

## Тестовый набор

1. Создание нового пользователя - добавляем нового пользователя в схему Auth в базе данных Supabase. Функция должна проверять, что созданный пользователь не равен null.
2. Выборка пользователей - получение листа всех пользователей. Функция должна возвращать лист.
3. Выборка котов - получение листа всех котов. Функция должна возвращать лист.
4. Выборка чатов - получение листа всех чатов. Функция должна возвращать лист.
5. Выборка сообщений пользователей - получение листа всех сообщений пользователей. Функция должна возвращать лист.
6. Выборка пород котов - получение листа всех пород котов. Функция должна возвращать лист.

## Тест кейс
Для проверки работоспособности серверной части с использованием языка программирования C# и фреймворка MSTest был разработан [проект](../../UnitTestProject/). С целью проведения тестирования были разработаны классы, которые описывают таблицы из базы данных в Supabase. Также были созданы методы для проверки самих данных из базы данных.
Все тесты пройдены успешно.

![картинка тестов](/image_UnitTests.png)
[Проект MSTest](../../UnitTestProject/)
#### 1. Создание нового пользователя

```csharp
[TestMethod]
public void CreateUser_EmailPassword()
{
    string email = "kolinichenko.05@mail.ru";
    string password = "123456";
    var session = CreateUser(email, password);
    session.Wait();
    var user = session.Result.User;
    Assert.IsNotNull(user);
}
```
#### 2. Выборка пользователей

```csharp
[TestMethod]
public void GetUsersList()
{
    var result = GetUsers();
    result.Wait();
    var users = result.Result.Models;
    Assert.IsNotNull(users);

}
```
#### 3. Выборка котов

```csharp
[TestMethod]
public void GetCat()
{
    var result = GetCats();
    result.Wait();
    var cats = result.Result.Models;
    Assert.IsNotNull(cats);
}
```
#### 4. Выборка чатов

```csharp
[TestMethod]
public void GetChats()
{
    var result = GetChat();
    result.Wait();
    var chats = result.Result.Models;
    Assert.IsNotNull(chats);
}
```
#### 5. Выборка сообщений пользователей

```csharp
[TestMethod]
public void GetMessageUser()
{
    var result = GetMessage();
    result.Wait();
    var message = result.Result.Models;
    Assert.IsNotNull(message);
}
```
#### 6. Выборка пород котов

```csharp
[TestMethod]
public void GetBreedCats()
{
    var result = GetBreed();
    result.Wait();
    var breed = result.Result.Models;
    Assert.IsNotNull(breed);
}
```